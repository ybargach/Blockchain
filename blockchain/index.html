<form id="dataForm">
    <label for="round">round:</label>
    <input type="text" id="round" name="round" required>
    
    <label for="Score_winner1">Score_winner1:</label>
    <input type="number" id="Score_winner1" name="Score_winner1" required>

    <label for="Winner1">Winner1:</label>
    <input type="text" id="Winner1" name="Winner1" required>
    
    <label for="Score_losser1">Score_losser1:</label>
    <input type="number" id="Score_losser1" name="Score_losser1" required>
    
    <label for="Losser1">Losser1:</label>
    <input type="text" id="Losser1" name="Losser1" required>
    
    <button type="submit">Submit</button>
</form>

<!-- New Button for Getting All Data -->
<button id="getAllData">Get All Data</button>
<button id="Balance">Balance</button>

<!-- Response Display -->
<pre id="responseOutput"></pre>

<script>
    document.getElementById("dataForm").addEventListener("submit", async function (event) {
        event.preventDefault(); // Prevent the default form submission

        // Gather data from form fields
        const round = document.getElementById("round").value;
        const Score_winner1 = document.getElementById("Score_winner1").value;
        const Winner1 = document.getElementById("Winner1").value;
        const Score_losser1 = document.getElementById("Score_losser1").value;
        const Losser1 = document.getElementById("Losser1").value;

        try {
            // Send the data to the backend
            const response = await fetch("http://127.0.0.1:8000/api/save_data/", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ round, Score_winner1, Winner1, Score_losser1, Losser1 }),
            });

            if (response.ok) {
                const result = await response.json();
                alert("Data saved successfully: " + JSON.stringify(result));
            } else {
                alert("Failed to save data. Please check the backend.");
            }
        } catch (error) {
            console.error("Error:", error);
            alert("An error occurred. Check console for details.");
        }
    });

    // Get All Data button event listener
    document.getElementById("getAllData").addEventListener("click", async function () {
        try {
            const response = await fetch("http://127.0.0.1:8000/api/process_data/", {
                method: "POST",
                headers: { "Content-Type": "application/json" }
            });

            if (response.ok) {
                const result = await response.json();
                document.getElementById("responseOutput").textContent = JSON.stringify(result, null, 2);
            } else {
                alert("Failed to retrieve data. Please check the backend.");
            }
        } catch (error) {
            console.error("Error:", error);
            alert("An error occurred. Check console for details.");
        }
    });
    document.getElementById("Balance").addEventListener("click", async function () {
        try {
            const response = await fetch("http://127.0.0.1:8000/api/balance/", {
                method: "POST",
                headers: { "Content-Type": "application/json" }
            });

            if (response.ok) {
                const result = await response.json();
                document.getElementById("responseOutput").textContent = JSON.stringify(result, null, 2);
            } else {
                alert("Failed to retrieve data. Please check the backend.");
            }
        } catch (error) {
            console.error("Error:", error);
            alert("An error occurred. Check console for details.");
        }
    });
</script>